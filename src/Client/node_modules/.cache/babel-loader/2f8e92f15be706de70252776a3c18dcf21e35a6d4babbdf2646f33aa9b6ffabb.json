{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{motion,AnimatePresence}from\"framer-motion\";import{useTranslation}from\"react-i18next\";import socket from\"../../socket\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GameOver=_ref=>{let{winner,roomSessionKey}=_ref;const[showScroll,setShowScroll]=useState(false);const[gameOverText,setGameOverText]=useState(\"\");const[winnerText,setWinnerText]=useState(\"\");const{t}=useTranslation();const fullGameOver=t(\"gameOver.gameOver\");const fullWinner=winner===\"good\"?t(\"gameOver.goodWins\"):t(\"gameOver.evilWins\");// small typing helper\nconst typeText=function(text,setText){let speed=arguments.length>2&&arguments[2]!==undefined?arguments[2]:150;let onFinish=arguments.length>3?arguments[3]:undefined;let i=0;const interval=setInterval(()=>{if(i<text.length){setText(text.substring(0,i+1));i++;}else{clearInterval(interval);if(onFinish)onFinish();}},speed);return interval;};useEffect(()=>{const scrollTimer=setTimeout(()=>setShowScroll(true),300);// type \"Game Over\" first, then winner\nconst typeTimer=setTimeout(()=>{typeText(fullGameOver,setGameOverText,200,()=>{typeText(fullWinner,setWinnerText,150);});},900);const timer=setTimeout(()=>{socket.emit(\"exit_game\",{roomSessionKey});},10000);setGameOverText(\"\");// Reset text before typing\nsetWinnerText(\"\");return()=>{clearTimeout(scrollTimer);clearTimeout(typeTimer);clearTimeout(timer);};},[fullWinner,roomSessionKey,winner]);return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 bg-black/60 flex items-center justify-center z-50\",style:{backgroundImage:\"url(/images/peakpx.jpg)\",backgroundSize:\"cover\",backgroundPosition:\"center\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/60 z-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center w-full max-w-4xl px-6\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:showScroll&&/*#__PURE__*/_jsx(motion.img,{src:\"/images/2302.w058.n003.249B.p1.249-removebg-preview.png\",alt:\"Scroll\",className:\"w-full max-w-3xl\",initial:{opacity:0,x:-200},animate:{opacity:1,x:0},exit:{opacity:0,x:200},transition:{duration:1,ease:\"easeInOut\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 flex flex-col items-center justify-center text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl font-bold text-black drop-shadow-lg\",children:gameOverText}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl font-bold mt-6 drop-shadow-lg \".concat(winner===\"good\"?\"text-black\":\"text-black\"),children:winnerText})]})]})]});};export default GameOver;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","useTranslation","socket","jsx","_jsx","jsxs","_jsxs","GameOver","_ref","winner","roomSessionKey","showScroll","setShowScroll","gameOverText","setGameOverText","winnerText","setWinnerText","t","fullGameOver","fullWinner","typeText","text","setText","speed","arguments","length","undefined","onFinish","i","interval","setInterval","substring","clearInterval","scrollTimer","setTimeout","typeTimer","timer","emit","clearTimeout","className","style","backgroundImage","backgroundSize","backgroundPosition","children","img","src","alt","initial","opacity","x","animate","exit","transition","duration","ease","concat"],"sources":["C:/Users/ntalg/Documents/NTALLAS_GEORGIOS_DOCUMENTS/PROJECTS/Sabotage/Sabotage/src/client/src/components/ui/GameOver.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useTranslation } from \"react-i18next\";\nimport socket from \"../../socket\";\n\nconst GameOver = ({ winner, roomSessionKey }) => {\n  const [showScroll, setShowScroll] = useState(false);\n  const [gameOverText, setGameOverText] = useState(\"\");\n  const [winnerText, setWinnerText] = useState(\"\");\n  const { t } = useTranslation();\n\n  const fullGameOver = t(\"gameOver.gameOver\");\n  const fullWinner = winner === \"good\" ? t(\"gameOver.goodWins\") : t(\"gameOver.evilWins\");\n\n  // small typing helper\n  const typeText = (text, setText, speed = 150, onFinish) => {\n    let i = 0;\n    const interval = setInterval(() => {\n      if (i < text.length) {\n        setText(text.substring(0, i + 1));\n        i++;\n      } else {\n        clearInterval(interval);\n        if (onFinish) onFinish();\n      }\n    }, speed);\n    return interval;\n  };\n\n  useEffect(() => {\n    const scrollTimer = setTimeout(() => setShowScroll(true), 300);\n\n    // type \"Game Over\" first, then winner\n    const typeTimer = setTimeout(() => {\n      typeText(fullGameOver, setGameOverText, 200, () => {\n        typeText(fullWinner, setWinnerText, 150);\n      });\n    }, 900);\n\n    const timer = setTimeout(() => {\n      socket.emit(\"exit_game\", { roomSessionKey });\n    }, 10000);\n\n    setGameOverText(\"\"); // Reset text before typing\n    setWinnerText(\"\");\n\n    return () => {\n      clearTimeout(scrollTimer);\n      clearTimeout(typeTimer);\n      clearTimeout(timer);\n    };\n  }, [fullWinner, roomSessionKey, winner]);\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50\"\n      style={{\n        backgroundImage: \"url(/images/peakpx.jpg)\",\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\",\n      }}\n    >\n      <div className=\"absolute inset-0 bg-black/60 z-0\"></div>\n      <div className=\"relative flex items-center justify-center w-full max-w-4xl px-6\">\n        {/* Scroll image */}\n        <AnimatePresence>\n          {showScroll && (\n            <motion.img\n              src=\"/images/2302.w058.n003.249B.p1.249-removebg-preview.png\"\n              alt=\"Scroll\"\n              className=\"w-full max-w-3xl\"\n              initial={{ opacity: 0, x: -200 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: 200 }}\n              transition={{ duration: 1, ease: \"easeInOut\" }}\n            />\n          )}\n        </AnimatePresence>\n\n        {/* Text written onto scroll */}\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center\">\n          <div className=\"text-4xl font-bold text-black drop-shadow-lg\">\n            {gameOverText}\n          </div>\n          <div\n            className={`text-5xl font-bold mt-6 drop-shadow-lg ${\n              winner === \"good\" ? \"text-black\" : \"text-black\"\n            }`}\n          >\n            {winnerText}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameOver;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}